<!DOCTYPE html>
<html>
<head>
  <link href="../css-custom/classic.css" rel="stylesheet" type="text/css" id="estuary-current-theme"/>
  <link href="../css-source/source.css" rel="stylesheet" type="text/css" id="estuary-current-theme"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

#ifndef PRODUCTION
  <script language="javascript" src="rts.js"></script>
  <script language="javascript" src="lib.js"></script>
  <script language="javascript" src="out.js"></script>
#endif
  <script language="javascript" src="EstuaryProtocol.js"></script>
  <script language="javascript" src="SuperDirt.js"></script>
  <script language="javascript" src="WebDirt/WebDirt.js"></script>
  <script language="javascript" src="WebDirt/Graph.js"></script>
  <script language="javascript" src="WebDirt/SampleBank.js"></script>
  <script language="javascript">
function downloadJS() {
  var element4 = document.createElement("script");
#ifdef PRODUCTION
  element4.setAttribute('src', "all.min.js");
#else
  element4.setAttribute('src', "runmain.js");
#endif
  element4.defer;
  document.head.appendChild(element4);
  console.log("elements added");
}

function start(){
  ___globalWebDirt = new WebDirt('WebDirt/sampleMap.json','Dirt/samples',null, function() {console.log('callback from WebDirt constructor completed');})
  ___globalWebDirt.initializeWebAudio();
  downloadJS();
}
    </script>
<style type="text/css">
    .full-screen {
      position: fixed;
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
    }

    .estuary-logo {
      background-color: black;
      display: flex;
    }

    .estuary-logo > canvas {
      margin: auto;
      max-width: 100%;
      max-height: 100%;
    }

    .estuary-icon-container {
      /*margin: auto;*/
    }

    .splash-icon > canvas {
      /*margin: auto;*/
      max-width: 100%;
      max-height: 100%;
      width: auto;
      height: auto;
    }
  </style>
  <script type="text/javascript" src="estuary-icon.js"></script>
</head>
<body onload="start()">
  <div id="estuary-splash" class="estuary-logo full-screen"></div>
  <script type="text/javascript">
    var EstuaryIcon = (function() {
      var container = document.querySelector('#estuary-splash');
      
      var icons = new EstuaryIcons(800, 800, {
        linesPerSec: 15,
        secUntilFullRadius: 10
      });
      var canvas = icons.addDisplay();
      container.appendChild(canvas);

      icons.startRendering();

      return {
        display: canvas,
        renderer: icons
      };
    })();
  </script>
</body>
</html>
